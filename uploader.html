<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Web Game Builder</title>
</head>
<body>
<h2>Upload your web game ZIP</h2>
<input type="file" id="file" accept=".zip">
<button id="upload">Upload</button>
<p id="status"></p>
<div id="links"></div>

<script>
document.getElementById('upload').addEventListener('click', async () => {
  const f = document.getElementById('file').files[0];
  if (!f) return alert('Select a ZIP file');
  const fd = new FormData();
  fd.append('gamezip', f);
  document.getElementById('status').textContent = 'Uploading...';
  const r = await fetch('/upload', { method: 'POST', body: fd });
  const json = await r.json();
  if (r.ok) {
    document.getElementById('status').textContent = 'Build ready!';
    document.getElementById('links').innerHTML = `
      <a href="${json.apk}" download>Download Android APK</a><br>
      <p>iOS project prepared. Download and open in Xcode: <a href="${json.iosProject}" download>Download iOS Project</a></p>
    `;
  } else {
    document.getElementById('status').textContent = 'Error: ' + (json.error || 'unknown');
  }
});
</script>
</body>
</html>
